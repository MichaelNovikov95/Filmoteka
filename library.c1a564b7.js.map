{"mappings":"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","sources":["src/library-index.js","src/script/watched.js","src/script/modal_developer-library.js","src/script/auth-modal-library.js"],"sourcesContent":["import './script/localStorageKey';\nimport './script/watched';\nimport './script/modalButton';\nimport './script/modal_developer-library';\nimport './script/auth-modal-library';\n","import { makeMarkup } from './cardMarkup';\nimport { MovieApi } from './fetchFilms';\nimport { getOnLocalStorage } from './localStorage';\nimport { refs } from './refs';\nimport { closeModal } from './onOpenCard';\nimport { backdrop } from './onOpenCard';\nimport { onGalleryContainerClick } from './onOpenCard';\nimport {\n  localStorageKeyQueue,\n  localStorageKeyWatched,\n} from './localStorageKey';\nrefs.btnHeaderEl.addEventListener('click', selectBTN);\nrefs.galleryEl.addEventListener('click', onGalleryContainerClick);\n\nconst movieApi = new MovieApi();\nconst arrIdMovieQueue = getOnLocalStorage(localStorageKeyQueue) || [];\nconst arrIdMovieWathed = getOnLocalStorage(localStorageKeyWatched) || [];\n\nif (arrIdMovieQueue.length !== 0) {\n  startLibraryMarkup(arrIdMovieQueue);\n} else console.log('no queue');\n\nasync function startLibraryMarkup(localStorageBase) {\n  try {\n    const objQueue = await fetchCardsLibrary(localStorageBase);\n    const norm1 = objQueue.map(card => card.data);\n    const norm2 = norm1.map(item => item.genres.map(genre => genre.id || []));\n    const finalcards = norm1.map(\n      (item, index) => (item.genre_ids = norm2[index])\n    );\n    refs.galleryEl.innerHTML = makeMarkup(norm1);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// export { startLibraryMarkup };\n\nasync function fetchCardsLibrary(arr) {\n  const arrayOfPromises = arr.map(async id => {\n    movieApi.id = id;\n    const response = await movieApi.fetchMovieById();\n    return response;\n  });\n  const cardMovieLibrary = await Promise.all(arrayOfPromises);\n  return cardMovieLibrary;\n}\n\nrefs.btnHeaderEl.addEventListener('click', selectBTN);\n\nfunction selectBTN(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  movieApi.testEvent = event.target.dataset.action;\n  if (event.target.dataset.action === 'watched') {\n    startLibraryMarkup(getOnLocalStorage(localStorageKeyWatched));\n    refs.btnGelleryWatchedEl.classList.add('active');\n    refs.btnGelleryQueueEl.classList.remove('active');\n  } else {\n    event.target.dataset.action === 'queue';\n    startLibraryMarkup(getOnLocalStorage(localStorageKeyQueue));\n    refs.btnGelleryQueueEl.classList.add('active');\n    refs.btnGelleryWatchedEl.classList.remove('active');\n  }\n}\n\nbackdrop.addEventListener('click', onClickBackdrop);\n\ndocument.addEventListener('keydown', onClickEsc);\n\nfunction onClickBackdrop(event) {\n  if (event.currentTarget === event.target) {\n    closeModal();\n  }\n}\nfunction onClickEsc(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\n","import Swiper from '/node_modules/swiper/swiper-bundle.min.js';\nimport '/node_modules/swiper/swiper-bundle.min.css';\n\nconst footerSpan = document.querySelector('.footer__link');\nconst backdrop = document.querySelector('.team-backdrop');\nconst body = document.querySelector('body');\n\nlet swiper = '';\nconst desktop = 1200;\nlet windowWidth = document.documentElement.clientWidth;\n\nfunction openModalHandle() {\n  backdrop.classList.remove('is-hidden');\n  body.classList.add('stop-scroll');\n\n  if (windowWidth < desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'cards',\n      grabCursor: true,\n    });\n    return;\n  }\n  if (windowWidth >= desktop) {\n    swiper = new Swiper('.team-modal', {\n      effect: 'flip',\n      grabCursor: true,\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n    });\n    return;\n  }\n}\n\nfunction closeModalHandle({ target }) {\n  if (\n    target.nodeName !== 'IMG' &&\n    target.classList[0] !== 'swiper-button-next' &&\n    target.classList[0] !== 'swiper-button-prev'\n  ) {\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfunction escCloseHandle(e) {\n  if (backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (!backdrop.classList.contains('is-hidden')) {\n    if (e.key !== 'Escape') {\n      return;\n    }\n    backdrop.classList.add('is-hidden');\n    body.classList.remove('stop-scroll');\n    swiper.destroy(true, true);\n  }\n}\n\nfooterSpan.addEventListener('click', openModalHandle);\nbackdrop.addEventListener('click', closeModalHandle);\ndocument.addEventListener('keydown', escCloseHandle);\n","import Notiflix from 'notiflix';\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\nconst firebaseConfig = {\n  apiKey: 'AIzaSyBz5_WEoInvREC_39QfDZZZECl5U8Gjy9s',\n  authDomain: 'auth-film.firebaseapp.com',\n  projectId: 'auth-film',\n  storageBucket: 'auth-film.appspot.com',\n  messagingSenderId: '298945320872',\n  appId: '1:298945320872:web:2c146219caa9b256beef9d',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth();\nconst logOutBtn = document.querySelector('[data-logout]');\n\nfunction onClickLogoutHandler(e) {\n  e.preventDefault();\n  signOut(auth)\n    .then(() => {\n      location.replace('https://michaelnovikov95.github.io/Filmoteka/');\n      Notiflix.Notify.warning('You are now successfully logged out!');\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      Notiflix.Notify.failure(errorCode);\n    });\n}\n\nlogOutBtn.addEventListener('click', onClickLogoutHandler);\n"],"names":["parcelRequire","$bpxeT","$lyT68","refs","btnHeaderEl","addEventListener","$359123cde4e54e6f$var$selectBTN","galleryEl","$1BmHy","onGalleryContainerClick","$359123cde4e54e6f$var$movieApi","$BRQVA","MovieApi","$359123cde4e54e6f$var$arrIdMovieQueue","$1hEYs","getOnLocalStorage","$dEUUr","localStorageKeyQueue","localStorageKeyWatched","$359123cde4e54e6f$var$startLibraryMarkup","localStorageBase","$359123cde4e54e6f$var$_startLibraryMarkup","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","objQueue","norm1","norm2","$359123cde4e54e6f$var$fetchCardsLibrary","_ctx","sent","map","card","data","item","genres","genre","id","index","genre_ids","innerHTML","$lyDIR","makeMarkup","console","log","t0","message","arr","$359123cde4e54e6f$var$_fetchCardsLibrary","_callee1","arrayOfPromises","cardMovieLibrary","response","fetchMovieById","Promise","all","_ctx1","event","target","nodeName","testEvent","dataset","action","btnGelleryWatchedEl","classList","add","btnGelleryQueueEl","remove","length","backdrop","currentTarget","closeModal","document","code","$6Bava","$00c7b7b781f0df5e$var$footerSpan","querySelector","$00c7b7b781f0df5e$var$backdrop","$00c7b7b781f0df5e$var$body","$00c7b7b781f0df5e$var$swiper","$00c7b7b781f0df5e$var$windowWidth","documentElement","clientWidth","effect","grabCursor","navigation","nextEl","prevEl","param","destroy","e","contains","key","$iU1Pc","$543806af20d564b0$var$auth","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$3SEMc","getAuth","preventDefault","signOut","then","location","replace","Notify","warning","catch","error","errorCode","failure"],"version":3,"file":"library.c1a564b7.js.map"}